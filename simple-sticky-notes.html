<!DOCTYPE html>
<html>
<head>
  <style>
    body {
      background-color: white;
    }
    #container {
      position: relative;
      width: 100%;
      height: 100vh;
    }
    #plus {
      position: absolute;
      top: 10px;
      left: 10px;
      cursor: pointer;
    }
    #instructions {
      position: absolute;
      top: 10px;
      left: 50px;
      font-size: 16px;
    }
    .rectangle {
      position: absolute;
      width: 5cm;
      height: 2cm;
      background-color: yellow;
      cursor: move;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .text-box {
      width: 90%;
      height: 90%;
      text-align: center;
      background-color: yellow;
      user-select: none;
      resize: none; /* リサイズ不可に設定 */
      overflow: hidden; /* オーバーフローを非表示にする */
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="plus">+</div>
    <h2 id="instructions">プラスマークを押すとテキストが出ます。自由に配置してね！</h2>
  </div>

  <script>
    function addRectangle() {
      var rectangle = document.createElement('div');
      rectangle.classList.add('rectangle');
      rectangle.style.top = '50px';
      rectangle.style.left = '50px';

      var textbox = document.createElement('textarea');
      textbox.classList.add('text-box');
      textbox.maxLength = 30; // 最大30文字
      textbox.placeholder = 'Enter text';
      rectangle.appendChild(textbox);

      textbox.addEventListener('keydown', function(e) {
        if (e.keyCode === 13) {
          e.preventDefault();
          textbox.blur();
        }
      });

      var initialX;
      var initialY;
      var active = false;

      textbox.addEventListener('mousedown', function(e) {
        e.stopPropagation();
        initialX = e.clientX - rectangle.getBoundingClientRect().left;
        initialY = e.clientY - rectangle.getBoundingClientRect().top;
        active = true;
      });

      document.addEventListener('mousemove', function(e) {
        if (active) {
          e.preventDefault();
          rectangle.style.left = e.clientX - initialX + 'px';
          rectangle.style.top = e.clientY - initialY + 'px';
        }
      });

      document.addEventListener('mouseup', function() {
        active = false;
      });

      var container = document.getElementById('container');
      container.appendChild(rectangle);
    }

    var plusButton = document.getElementById('plus');
    plusButton.addEventListener('click', addRectangle);
  </script>
</body>
</html>

